/*! For license information please see requirements-bundle.js.LICENSE.txt */
(()=>{var e,t={9925:(e,t,n)=>{var r=n(9755);n(1388),n(3734),n(7634),n(1112),n(7168),n(2993),n(944),n(3889),n(7312),n(2106),n(1659);let i=n(5759);const o=n(9367),{SearchNode:a}=n(3024),{init_simulator_tab:s}=n(988);let l,c,u=n(4070),{Textcomplete:h,Textarea:d}=n(6290),f=new u([],{}),p=["","has_formalization"],v=["","Todo","Review","Done"],m=[":AND:",":OR:",":NOT:",":COL_INDEX_01:",":COL_INDEX_02:",":COL_INDEX_03:",":COL_INDEX_04:",":COL_INDEX_05:",":COL_INDEX_06:",":COL_INDEX_07:"],g=[""],y=[""],_=[],b=null,w=[!0,!0,!0,!0,!0,!0],k=[],x=JSON.parse(search_query),C={},O=[],E=sessionStorage.getItem("req_search_string"),S=sessionStorage.getItem("filter_status_string"),L=sessionStorage.getItem("filter_tag_string"),M=sessionStorage.getItem("filter_type_string");function T(){E=r("#search_bar").val().trim(),sessionStorage.setItem("req_search_string",E),l=a.fromQuery(E)}function q(){function e(e,t,n){return t.length>0&&(e.length>0&&(e=e.concat([":AND:"])),e=e.concat(function(e){return["("].concat(e,[")"])}(a.awesomeQuerySplitt0r(t,n)))),e}k=[],S=r("#status-filter-input").val(),L=r("#tag-filter-input").val(),M=r("#type-filter-input").val(),sessionStorage.setItem("filter_status_string",S),sessionStorage.setItem("filter_tag_string",L),sessionStorage.setItem("filter_type_string",M),k=e(k,M,4),k=e(k,L,5),k=e(k,S,6),c=a.searchArrayToTree(k)}function P(e){let t=[];return e.rows({selected:!0}).every((function(){let e=this.data();t.push(e.id)})),t}function j(){r(".requirement_var_group").each((function(){r(this).hide(),r(this).removeClass("type-error")})),r(".formalization_card").each((function(){const e=r(this).attr("title"),t=r("#requirement_scope"+e).val(),n=r("#requirement_pattern"+e).val();let i=r("#formalization_heading"+e),o=r("#requirement_var_group_p"+e),a=r("#requirement_var_group_q"+e),s=r("#requirement_var_group_r"+e),l=r("#requirement_var_group_s"+e),c=r("#requirement_var_group_t"+e),u=r("#requirement_var_group_u"+e),h=r("#requirement_var_group_v"+e);if(e in O)for(let t=0;t<O[e].length;t++)r("#formalization_var_"+O[e][t]+e).addClass("type-error"),i.addClass("type-error-head");else i.removeClass("type-error-head");switch(t){case"BEFORE":case"AFTER":o.show();break;case"BETWEEN":case"AFTER_UNTIL":o.show(),a.show()}Object.keys(_PATTERNS[n].env).forEach((function(e){switch(e){case"R":s.show();break;case"S":l.show();break;case"T":c.show();break;case"U":u.show();break;case"V":h.show()}}))}))}function A(e){let t="";return e.split(/([\s&<>!()=:\[\]{}\-|+*,])/g).forEach((function(e){y.includes(e)?t+='<a href="./variables?command=search&col=1&q=%5C%22'+e+'%5C%22" target="_blank"  title="Go to declaration of '+e+'" class="alert-link">'+e+"</a>":t+=i.escapeHtml(e)})),t}function I(){r(".formalization_card").each((function(){const e=r(this).attr("title");let t="",n=r("#current_formalization_textarea"+e);const i=r("#requirement_scope"+e).find("option:selected").text().replace(/\s\s+/g," "),a=r("#requirement_pattern"+e).find("option:selected").text().replace(/\s\s+/g," ");"None"!==i&&"None"!==a&&(t=i+", "+a+".");let s=r("#formalization_var_p"+e).val(),l=r("#formalization_var_q"+e).val(),c=r("#formalization_var_r"+e).val(),u=r("#formalization_var_s"+e).val(),h=r("#formalization_var_t"+e).val(),d=r("#formalization_var_u"+e).val(),f=r("#formalization_var_v"+e).val();s.length>0&&(t=t.replace(/{P}/g,A(s))),l.length>0&&(t=t.replace(/{Q}/g,A(l))),c.length>0&&(t=t.replace(/{R}/g,A(c))),u.length>0&&(t=t.replace(/{S}/g,A(u))),h.length>0&&(t=t.replace(/{T}/g,A(h))),d.length>0&&(t=t.replace(/{U}/g,A(d))),f.length>0&&(t=t.replace(/{V}/g,A(f))),n.html(t),o.update(n)})),r("#requirement_modal").data({unsaved_changes:!0,updated_formalization:!0})}function N(e){let t=new d(e),n=new h(t,{dropdown:{maxCount:10}});n.register([{match:/(^|\s|[!=&\|>]+)(\w+)$/,search:function(e,t){let n=function(e){return f.search(e)}(e),r=[];for(let e=0;e<Math.min(10,n.length);e++)r.push(y[n[e]]);t(r)},replace:function(e){return"$1"+e+" "}}]),r(e).on("blur click",(function(e){n.dropdown.deactivate(),e.preventDefault()}))}function z(){r(".reqirement-variable").each((function(){N(this)}))}function R(e){if(-1===e)return void alert("Requirement not found.");let t=r("#requirements_table").DataTable().row(e).data(),n=r(".modal-content");r("#requirement_modal").modal("show"),n.LoadingOverlay("show"),r("#formalization_accordion").html(""),r("#requirement_tag_field").data("bs.tokenfield").$input.autocomplete({source:p}),r.get("api/req/get",{id:t.id,row_idx:e},(function(t){if(!1===t.success)return void alert("Could Not load the Requirement: "+t.errormsg);r("#requirement_id").val(t.id),r("#modal_associated_row_index").val(e),y=t.available_vars,y=y.concat(t.additional_static_available_vars),O=t.type_inference_errors,f=new u(y,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:12,minMatchCharLength:1,keys:void 0}),r("#requirement_modal_title").html(t.id+": "+t.type),r("#description_textarea").text(t.desc).change(),r("#add_guess_description").text(t.desc).change(),r("#formalization_accordion").html(t.formalizations_html),r("#requirement_scope").val(t.scope),r("#requirement_pattern").val(t.pattern),r("#requirement_tag_field").tokenfield("setTokens",t.tags),r("#requirement_status").val(t.status);let n=r("#csv_content_accordion");n.html(""),n.collapse("hide");let i=t.csv_data;for(const e in i)if(i.hasOwnProperty(e)){const t=i[e];n.append("<p><strong>"+e+":</strong>"+t+"</p>")}let o=r("#show_revision_diff");r.isEmptyObject(t.revision_diff)?o.hide():o.show();let a=r("#revision_diff_accordion");a.html(""),a.collapse("hide");let s=t.revision_diff;for(const e in s)if(s.hasOwnProperty(e)){const t=s[e];a.append("<p><strong>"+e+":</strong><pre>"+t+"</pre></p>")}let l=r("#used_variables_accordion");l.html(""),l.collapse("hide"),t.vars.forEach((function(e){let t="?command=search&col=1&q=%5C%22"+e+"%5C%22";l.append('<span class="badge badge-info"><a href="./variables'+t+'" target="_blank">'+e+"</a></span>&numsp;")}))})).done((function(){j(),z(),r("#requirement_tag_field").on("tokenfield:createtoken",(function(e){let t=r(this).tokenfield("getTokens");r.each(t,(function(t,n){n.value===e.attrs.value&&e.preventDefault()}))})),I(),r("#requirement_modal").data({unsaved_changes:!1,updated_formalization:!1}),n.LoadingOverlay("hide",!0)}))}function D(){let e=r("#requirements_table").DataTable(),t=[];r.each(e.columns().visible(),(function(e,n){!1===n?(r("#col_toggle_button_"+e).removeClass("btn-info").addClass("btn-secondary"),t.push(!1)):(r("#col_toggle_button_"+e).removeClass("btn-secondary").addClass("btn-info"),t.push(!0))})),w=t}function H(e){r("#requirements_table").DataTable({language:{emptyTable:"Loading data."},paging:!0,stateSave:!0,select:{style:"os",selector:"td:first-child"},pageLength:50,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:"api/req/gets",deferRender:!0,columnDefs:e,createdRow:function(e,t){"Heading"===t.type&&r(e).addClass("bg-primary"),"Information"===t.type&&r(e).addClass("table-info"),"Requirement"===t.type&&r(e).addClass("table-warning"),"not set"===t.type&&r(e).addClass("table-light")},infoCallback:function(e,t,n,i,o){let a=this.api().page.info();r("#clear-all-filters-text").html("Showing "+o+"/"+a.recordsTotal+". Clear all.");let s="Showing "+t+" to "+n+" of "+o+" entries";return s+=" (filtered from "+a.recordsTotal+" total entries).",s},initComplete:function(){r("#search_bar").val(E),r("#type-filter-input").val(M),r("#tag-filter-input").val(L),r("#status-filter-input").val(S);let e=this.api();!function(e){r("#requirements_table").find("tbody").on("click","a",(function(t){t.preventDefault(),R(e.row(r(this).closest("tr")).index())}))}(e),function(e){e.columns().every((function(t){t>0&&e.column(t).header().append(" ("+t+")")})),r("#save_requirement_modal").click((function(){!function(e){let t=r(".modal-content");t.LoadingOverlay("show");const n=r("#requirement_id").val(),i=r("#requirement_tag_field").val(),o=r("#requirement_status").val(),a=r("#requirement_modal").data("updated_formalization"),s=parseInt(r("#modal_associated_row_index").val());let l={};r(".formalization_card").each((function(){let e={};e.id=r(this).attr("title"),r(this).find("select").each((function(){r(this).hasClass("scope_selector")&&(e.scope=r(this).val()),r(this).hasClass("pattern_selector")&&(e.pattern=r(this).val())})),e.expression_mapping={},r(this).find("textarea.reqirement-variable").each((function(){""!==r(this).attr("title")&&(e.expression_mapping[r(this).attr("title")]=r(this).val())})),l[e.id]=e})),r.post("api/req/update",{id:n,row_idx:s,update_formalization:a,tags:i,status:o,formalizations:JSON.stringify(l)},(function(n){t.LoadingOverlay("hide",!0),!1===n.success?alert(n.errormsg):(e.row(s).data(n),r("#requirement_modal").data("unsaved_changes",!1).modal("hide"))})).done((function(){Q()}))}(e)})),r("#search_bar").keypress((function(t){13===t.which&&(T(),e.draw())})),r("#type-filter-input").autocomplete({minLength:0,source:g,delay:100}),r("#status-filter-input").autocomplete({minLength:0,source:v,delay:100}),r("#tag-filter-input").autocomplete({minLength:0,source:p,delay:100}),r("#tag-filter-input, #status-filter-input, #type-filter-input").on("focus",(function(){r(this).keydown()})).on("keypress",(function(t){13===t.which&&(q(),e.draw())})),r("#table-filter-toggle").click((function(){r("#tag-filter-input").autocomplete({source:p}),r("#type-filter-input").autocomplete({source:g})})),r(".clear-all-filters").click((function(){r("#status-filter-input").val("").effect("highlight",{color:"green"},500),r("#tag-filter-input").val("").effect("highlight",{color:"green"},500),r("#type-filter-input").val("").effect("highlight",{color:"green"},500),r("#search_bar").val("").effect("highlight",{color:"green"},500),q(),T(),e.draw()})),r("#gen-req-from-selection").click((function(){let t=[];e.rows({search:"applied"}).every((function(){let e=this.data();t.push(e.id)})),r("#selected_requirement_ids").val(JSON.stringify(t)),r("#generate_req_form").submit()})),r("#gen-csv-from-selection").click((function(){let t=[];e.rows({search:"applied"}).every((function(){let e=this.data();t.push(e.id)})),r("#selected_csv_requirement_ids").val(JSON.stringify(t)),r("#generate_csv_form").submit()})),r(".colum-toggle-button").on("click",(function(t){t.preventDefault();let n=e.column(r(this).attr("data-column"));n.visible(!n.visible()),D()})),r(".reset-colum-toggle").on("click",(function(t){t.preventDefault(),e.columns(".default-col").visible(!0),e.columns(".extra-col").visible(!1),D()})),D(),r(".select-all-button").on("click",(function(){r(this).hasClass("btn-secondary")?e.rows({page:"current"}).select():e.rows({page:"current"}).deselect(),r(".select-all-button").toggleClass("btn-secondary btn-primary")})),e.on("user-select",(function(){let e=r(".select-all-button");e.removeClass("btn-primary"),e.addClass("btn-secondary ")})),r("#multi-add-tag-input, #multi-remove-tag-input").autocomplete({minLength:0,source:p,delay:100}).on("focus",(function(){r(this).keydown()})).val(""),r("#multi-set-status-input").autocomplete({minLength:0,source:v,delay:100}).on("focus",(function(){r(this).keydown()})).val(""),r(".apply-multi-edit").click((function(){!function(e){let t=r("body");t.LoadingOverlay("show");let n=r("#multi-add-tag-input").val().trim(),i=r("#multi-remove-tag-input").val().trim(),o=r("#multi-set-status-input").val().trim(),a=P(e);r.post("api/req/multi_update",{add_tag:n,remove_tag:i,set_status:o,selected_ids:JSON.stringify(a)},(function(e){t.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()}))}(e)})),r(".add_top_guess_button").confirmation({rootSelector:".add_top_guess_button"}).click((function(){!function(e){let t=r("body");t.LoadingOverlay("show");let n=P(e),i=r("#top_guess_append_mode").val();r.post("api/req/multi_add_top_guess",{selected_ids:JSON.stringify(n),insert_mode:i},(function(e){t.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):location.reload()}))}(e)}))}(e),i.process_url_query(x),T(),q(),r.fn.dataTable.ext.search.push((function(e,t){return function(e){return l.evaluate(e,w)&&c.evaluate(e,w)}(t)})),this.api().draw(),r("#requirements_table").colResizable({liveDrag:!0,postbackSafe:!0})}})}function F(){let e=r("#requirement_modal");r("#requirement_tag_field").tokenfield({autocomplete:{source:p,delay:100},showAutocompleteOnFocus:!0}).change((function(){e.data("unsaved_changes",!0)})),r("#requirement_status").change((function(){r("#requirement_modal").data("unsaved_changes",!0)})),e.on("hide.bs.modal",(function(e){!function(e){!0===r("#requirement_modal").data("unsaved_changes")&&!0!==confirm("You have unsaved changes, do you really want to close?")&&e.preventDefault()}(e)})),r(document).keyup((function(e){if(r(".modal:visible").length&&27===e.keyCode){let e=r("input[type=text], textarea, select").filter(":focus");0===e.length?r("#requirement_guess_modal:visible").length?r("#requirement_guess_modal").modal("hide"):r("#requirement_modal").modal("hide"):e.each((function(){r(this).blur()}))}})),e.on("hidden.bs.modal",(function(){r("#requirement_tag_field").val(""),r("#requirement_tag_field-tokenfield").val("")})),r("#add_formalization").click((function(){!function(){let e=r(".modal-content");e.LoadingOverlay("show");const t=r("#requirement_id").val();r.post("api/req/new_formalization",{id:t},(function(t){if(e.LoadingOverlay("hide",!0),!1===t.success)alert(t.errormsg);else{let e=r(t.html);e.find(".reqirement-variable").each((function(){N(this)})),e.appendTo("#formalization_accordion")}})).done((function(){j(),I(),Q()}))}()})),r("#add_gussed_formalization").click((function(){!function(){let e=r("#requirement_guess_modal"),t=r("#available_guesses_cards"),n=r(".modal-content"),i=r("#requirement_id").val();function o(e){let n='<div class="card">                    <div class="pl-1 pr-1">                        <p>'+e.string+'                        </p>                    </div>                    <button type="button" class="btn btn-success btn-sm add_guess"                            title="Add formalization"                            data-scope="'+e.scope+'"                            data-pattern="'+e.pattern+"\"                            data-mapping='"+JSON.stringify(e.mapping)+"'>                        <strong>+ Add this formalization +</strong>                    </button>                </div>";t.append(n)}e.modal({keyboard:!1}),e.modal("show"),n.LoadingOverlay("show"),t.html(""),r.post("api/req/get_available_guesses",{requirement_id:i},(function(e){if(!1===e.success)alert(e.errormsg);else for(let t=0;t<e.available_guesses.length;t++)o(e.available_guesses[t])})).done((function(){r(".add_guess").click((function(){!function(e,t,n){let i=r(".modal-content");i.LoadingOverlay("show");let o=r("#requirement_id").val();r.post("api/req/add_formalization_from_guess",{requirement_id:o,scope:e,pattern:t,mapping:JSON.stringify(n)},(function(e){i.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):r("#formalization_accordion").append(e.html)})).done((function(){j(),I(),z(),Q()}))}(r(this).data("scope"),r(this).data("pattern"),r(this).data("mapping"))})),n.LoadingOverlay("hide",!0)}))}()})),r(".modal").on("hidden.bs.modal",(function(){r(".modal:visible").length?r("body").addClass("modal-open"):r("textarea").each((function(){o.destroy(r(this))}))})),r("#formalization_accordion").on("shown.bs.collapse",".card",(function(){r(this).find("textarea").each((function(){o(r(this)),o.update(r(this))}))})),j()}function Q(){r.get("api/logs/get","",(function(e){r("#log_textarea").html(e)})).done((function(){r(".req_direct_link").click((function(){R(function(e){let t=r("#requirements_table").DataTable(),n=-1;return t.column(2).data().filter((function(t,r){return String(t)===String(e)&&(n=r,!0)})),n}(r(this).data("rid")))})),r("#log_textarea").scrollTop(1e5)}))}function W(){r.get("api/report/get",{},(function(e){if(!1===e.success)alert(e.errormsg);else{let t="";_=e.data,r.each(e.data,(function(e,n){t+=`<div class="card border-primary">\n                              <div class="card-body">\n                                <h5 class="card-title">${n.name}</h5>\n                                <h6 class="card-subtitle mb-2 text-muted">Query</h6>\n                                <p class="card-text report-results">${n.queries}</p>\n                                <h6 class="card-subtitle mb-2 text-muted">Matches for queries</h6>\n                                <p class="card-text report-results">${n.results}</p>\n                                <a href="#" class="card-link open-report" data-id="${e}">\n                                    Edit (reevaluate) Report.\n                                </a>\n                                <a href="#" class="card-link delete-report" data-id="${e}">Delete Report.</a>\n                              </div>\n                            </div>`})),r("#available_reports").html(t)}}))}function $(e=!1){let t=r("#report_query_textarea"),n=r("#report_results_textarea"),i=r("#report_modal_title"),o=r("#report_name"),a="",s="",l="",c=-1,u=r("#report_modal");!1!==e&&(c=e.attr("data-id"),a=_[c].queries,s=_[c].results,l=_[c].name),t.val(a).change(),n.val(s).change(),o.val(l).change(),i.html(l),r("#save_report").attr("data-id",c),u.modal("show")}r(document).ready((function(){r.get("api/meta/get","",(function(e){C=e.tag_colors,b=e.available_search_strings;let t=r("#search_bar");new Awesomplete(t[0],{filter:function(e,t){let n=!1;return(t.split(":").length-1)%2==1&&(n=Awesomplete.FILTER_CONTAINS(e,t.match(/[^:]*$/)[0])),n},item:function(e,t){return Awesomplete.ITEM(e,t.match(/(:)([\S]*$)/)[2])},replace:function(e){const t=this.input.value.match(/(.*)(:(?!.*:).*$)/)[1];this.input.value=t+e},list:m,minChars:1,autoFirst:!0})})),function(){let e=[{orderable:!1,className:"select-checkbox",targets:[0],data:null,defaultContent:""},{targets:[1],data:"pos"},{targets:[2],data:"id",render:function(e){return'<a href="#">'+i.escapeHtml(e)+"</a>"}},{targets:[3],data:"desc",render:function(e){return'<div class="white-space-pre">'+i.escapeHtml(e)+"</div>"}},{targets:[4],data:"type",render:function(e){return g.indexOf(e)<=-1&&g.push(e),i.escapeHtml(e)}},{targets:[5],data:"tags",render:function(e,t,n){let o="";if(r(e).each((function(e,t){var n;t.length>0&&(o+='<span class="badge" style="background-color: '+(n=t,(C.hasOwnProperty(n)?C[n]:"#5bc0de")+'">')+i.escapeHtml(t)+"</span></br>",p.indexOf(t)<=-1&&p.push(t))})),n.formal.length>0){let e=!1,t=!1;r.each(n.formal,(function(n,r){r.length>0&&"// None, // not formalizable"!==r?e||(e=!0,o+='<span class="badge badge-success">has_formalization</span></br>'):t||(t=!0,o+='<span class="badge badge-warning">incomplete_formalization</span></br>')}))}return o}},{targets:[6],data:"status",render:function(e){return'<span class="badge badge-info">'+e+"</span></br>"}},{targets:[7],data:"formal",render:function(e,t,n){let o="";return n.formal.length>0&&r(e).each((function(e,t){t.length>0&&(o+='<div class="white-space-pre">'+i.escapeHtml(t)+"</div>")})),o}}];r.get("api/table/colum_defs","",(function(t){const n=t.col_defs.length;for(let r=0;r<n;r++)e.push({targets:[parseInt(t.col_defs[r].target)],data:t.col_defs[r].csv_name,visible:!1,searchable:!0})})).done((function(){H(e)}))}(),F(),Q(),function(){r("#add-new-report").click((function(){$()})),r("#eval_report").click((function(){!function(){let e=r("body");e.LoadingOverlay("show");const t=r("#report_query_textarea").val().split("\n");let n=r("#requirements_table").DataTable(),i="";const o=/^(:NAME:)(`(\w+)`)(.*)/;try{r.each(t,(function(e,t){let r=o.exec(t);null!=r&&(t=r[4],e=r[3]),l=a.fromQuery(t),n.draw();let s=n.page.info();i+=`"${e}":\t${s.recordsDisplay}\n`})),r("#report_results_textarea").val(i).change(),T(),n.draw()}catch(e){alert(e)}e.LoadingOverlay("hide",!0)}()})),r("#save_report").click((function(){!function(){let e=r("body");e.LoadingOverlay("show"),r.post("api/report/set",{report_querys:r("#report_query_textarea").val(),report_results:r("#report_results_textarea").val(),report_name:r("#report_name").val(),report_id:r("#save_report").attr("data-id")},(function(t){e.LoadingOverlay("hide",!0),!1===t.success&&alert(t.errormsg),W()}))}()}));let e=r("#available_reports");e.on("click",".open-report",(function(){$(r(this))})),e.on("click",".delete-report",(function(){var e;e=r(this).attr("data-id"),r.ajax({type:"DELETE",url:"api/report/delete",data:{report_id:e},success:function(e){!1===e.success&&alert(e.errormsg),W()}})})),r("#report_name").change((function(){r("#report_modal_title").html(r(this).val())})),W()}(),s();let e=r("body");e.confirmation({rootSelector:".delete_formalization",selector:".delete_formalization",onConfirm:function(){!function(e,t){let n=r(".modal-content");n.LoadingOverlay("show");const i=r("#requirement_id").val();r.post("api/req/del_formalization",{requirement_id:i,formalization_id:e},(function(e){n.LoadingOverlay("hide",!0),!1===e.success?alert(e.errormsg):t.remove()})).done((function(){j(),I(),Q()}))}(r(this).attr("name"),r(this).closest(".card"))}}),e.on("change",".formalization_selector, .reqirement-variable, .req_var_type",(function(){I()})),e.on("change",".formalization_selector",(function(){j()})),e.on("shown.bs.modal","#requirement_modal",(function(){r(this).find("textarea").each((function(){o(r(this)),o.update(r(this))}))})),e.on("change focus","textarea",(function(){o(r(this)),o.update(r(this))}))}))},988:(e,t,n)=>{var r=n(9755);function i(){let e=r("#requirements_table").DataTable(),t=[];return e.rows({selected:!0}).every((function(){t.push(this.data().id)})),t}function o(){let e=r("#simulator-select");r.ajax({type:"GET",url:"simulator",data:{command:"get_simulators"},success:function(t){!1!==t.success?(e.empty(),r.each(t.data.simulators,(function(t,n){e.append(r("<option></option>").val(n[0]).text(n[1]+" ("+n[0]+")"))}))):alert(t.errormsg)}})}n(6891),n(717),t.init_simulator_tab=function(){let e=r("#simulator-name-input"),t=r("#simulator-select");o(),r("#create-simulator-btn").click((function(){r.ajax({type:"POST",url:"simulator",data:{command:"create_simulator",simulator_name:e.val()||"unnamed",requirement_ids:JSON.stringify(i())},success:function(e){if(!1===e.success)return void alert(e.errormsg);let n=e.data.simulator_id,i=e.data.simulator_name;t.prepend(r("<option></option>").val(n).text(i+" ("+n+")")).val(n)}})})),r("#delete-simulator-btn").click((function(){r.ajax({type:"DELETE",url:"simulator",data:{command:"delete_simulator",simulator_id:t.val()},success:function(e){!1!==e.success?o():alert(e.errormsg)}})})),r("#start-simulator-btn").click((function(){let e=t.val();r.ajax({type:"GET",url:"simulator",data:{command:"init_simulator_modal",simulator_id:e},success:function(e){!1!==e.success?function(e){let t=r(e);r((function(){t.find("#simulator-accordion").sortable()})),r((function(){t.find("#bla").sortable()})),t.modal("show")}(e.data.html):alert(e.errormsg)}})}))}},7168:(e,t,n)=>{var r,i;r=[n(9755),n(1112),n(6099)],void 0===(i=function(e){return function(e,t,n,r){return e.fn.dataTable}(e,window,document)}.apply(t,r))||(e.exports=i)},6729:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e,t){var r=n?n+e:e,i=this._events[r];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,a=i.length,s=new Array(a);o<a;o++)s[o]=i[o].fn;return s},o.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){var o=new i(t,r||this),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},o.prototype.once=function(e,t,r){var o=new i(t,r||this,!0),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},o.prototype.removeListener=function(e,t,i,o){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new r:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||o&&!s.once||i&&s.context!==i||(0==--this._eventsCount?this._events=new r:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||o&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new r:delete this._events[a]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new r:delete this._events[t])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=n,o.EventEmitter=o,e.exports=o},4070:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(1),a=n(7),s=a.get,l=(a.deepValue,a.isArray),c=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,a=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,d=n.caseSensitive,f=void 0!==d&&d,p=n.tokenSeparator,v=void 0===p?/ +/g:p,m=n.findAllMatches,g=void 0!==m&&m,y=n.minMatchCharLength,_=void 0===y?1:y,b=n.id,w=void 0===b?null:b,k=n.keys,x=void 0===k?[]:k,C=n.shouldSort,O=void 0===C||C,E=n.getFn,S=void 0===E?s:E,L=n.sortFn,M=void 0===L?function(e,t){return e.score-t.score}:L,T=n.tokenize,q=void 0!==T&&T,P=n.matchAllTokens,j=void 0!==P&&P,A=n.includeMatches,I=void 0!==A&&A,N=n.includeScore,z=void 0!==N&&N,R=n.verbose,D=void 0!==R&&R;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:a,threshold:c,maxPatternLength:h,isCaseSensitive:f,tokenSeparator:v,findAllMatches:g,minMatchCharLength:_,id:w,keys:x,includeMatches:I,includeScore:z,shouldSort:O,getFn:S,sortFn:M,verbose:D,tokenize:q,matchAllTokens:j},this.setCollection(t),this._processKeys(x)}var t,n;return t=e,(n=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,n=e.length;t<n;t+=1){var r=e[t];this._keyWeights[r]=1,this._keyNames.push(r)}else{for(var i=null,o=null,a=0,s=0,l=e.length;s<l;s+=1){var c=e[s];if(!c.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var u=c.name;if(this._keyNames.push(u),!c.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var h=c.weight;if(h<0||h>1)throw new Error('"weight" property in key must bein the range of [0, 1)');o=null==o?h:Math.max(o,h),i=null==i?h:Math.min(i,h),this._keyWeights[u]=h,a+=h}if(a>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var n=this._prepareSearchers(e),r=n.tokenSearchers,i=n.fullSearcher,o=this._search(r,i);return this._computeScore(o),this.options.shouldSort&&this._sort(o),t.limit&&"number"==typeof t.limit&&(o=o.slice(0,t.limit)),this._format(o)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var n=e.split(this.options.tokenSeparator),r=0,i=n.length;r<i;r+=1)t.push(new o(n[r],this.options));return{tokenSearchers:t,fullSearcher:new o(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.list,r={},i=[];if("string"==typeof n[0]){for(var o=0,a=n.length;o<a;o+=1)this._analyze({key:"",value:n[o],record:o,index:o},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t});return i}for(var s=0,l=n.length;s<l;s+=1)for(var c=n[s],u=0,h=this._keyNames.length;u<h;u+=1){var d=this._keyNames[u];this._analyze({key:d,value:this.options.getFn(c,d),record:c,index:s},{resultMap:r,results:i,tokenSearchers:e,fullSearcher:t})}return i}},{key:"_analyze",value:function(e,t){var n=this,r=e.key,i=e.arrayIndex,o=void 0===i?-1:i,a=e.value,s=e.record,c=e.index,u=t.tokenSearchers,h=void 0===u?[]:u,d=t.fullSearcher,f=t.resultMap,p=void 0===f?{}:f,v=t.results,m=void 0===v?[]:v;!function e(t,i,o,a){if(null!=i)if("string"==typeof i){var s=!1,c=-1,u=0;n._log("\nKey: ".concat(""===r?"--":r));var f=d.search(i);if(n._log('Full text: "'.concat(i,'", score: ').concat(f.score)),n.options.tokenize){for(var v=i.split(n.options.tokenSeparator),g=v.length,y=[],_=0,b=h.length;_<b;_+=1){var w=h[_];n._log('\nPattern: "'.concat(w.pattern,'"'));for(var k=!1,x=0;x<g;x+=1){var C=v[x],O=w.search(C),E={};O.isMatch?(E[C]=O.score,s=!0,k=!0,y.push(O.score)):(E[C]=1,n.options.matchAllTokens||y.push(1)),n._log('Token: "'.concat(C,'", score: ').concat(E[C]))}k&&(u+=1)}c=y[0];for(var S=y.length,L=1;L<S;L+=1)c+=y[L];c/=S,n._log("Token score average:",c)}var M=f.score;c>-1&&(M=(M+c)/2),n._log("Score average:",M);var T=!n.options.tokenize||!n.options.matchAllTokens||u>=h.length;if(n._log("\nCheck Matches: ".concat(T)),(s||f.isMatch)&&T){var q={key:r,arrayIndex:t,value:i,score:M};n.options.includeMatches&&(q.matchedIndices=f.matchedIndices);var P=p[a];P?P.output.push(q):(p[a]={item:o,output:[q]},m.push(p[a]))}}else if(l(i))for(var j=0,A=i.length;j<A;j+=1)e(j,i[j],o,a)}(o,a,s,c)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,n=!!Object.keys(t).length,r=0,i=e.length;r<i;r+=1){for(var o=e[r],a=o.output,s=a.length,l=1,c=0;c<s;c+=1){var u=a[c],h=u.key,d=n?t[h]:1,f=0===u.score&&t&&t[h]>0?Number.EPSILON:u.score;l*=Math.pow(f,d)}o.score=l,this._log(o)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,(function(e,t){if("object"===r(t)&&null!==t){if(-1!==n.indexOf(t))return;n.push(t)}return t}),2)),n=null}var i=[];this.options.includeMatches&&i.push((function(e,t){var n=e.output;t.matches=[];for(var r=0,i=n.length;r<i;r+=1){var o=n[r];if(0!==o.matchedIndices.length){var a={indices:o.matchedIndices,value:o.value};o.key&&(a.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(a.arrayIndex=o.arrayIndex),t.matches.push(a)}}})),this.options.includeScore&&i.push((function(e,t){t.score=e.score}));for(var o=0,a=e.length;o<a;o+=1){var s=e[o];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),i.length){for(var l={item:s.item},c=0,u=i.length;c<u;c+=1)i[c](s,l);t.push(l)}else t.push(s.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&i(t.prototype,n),e}();e.exports=c},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=n(2),o=n(3),a=n(6),s=function(){function e(t,n){var r=n.location,i=void 0===r?0:r,o=n.distance,s=void 0===o?100:o,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,h=void 0===u?32:u,d=n.isCaseSensitive,f=void 0!==d&&d,p=n.tokenSeparator,v=void 0===p?/ +/g:p,m=n.findAllMatches,g=void 0!==m&&m,y=n.minMatchCharLength,_=void 0===y?1:y,b=n.includeMatches,w=void 0!==b&&b;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:i,distance:s,threshold:c,maxPatternLength:h,isCaseSensitive:f,tokenSeparator:v,findAllMatches:g,includeMatches:w,minMatchCharLength:_},this.pattern=f?t:t.toLowerCase(),this.pattern.length<=h&&(this.patternAlphabet=a(this.pattern))}var t,n;return t=e,(n=[{key:"search",value:function(e){var t=this.options,n=t.isCaseSensitive,r=t.includeMatches;if(n||(e=e.toLowerCase()),this.pattern===e){var a={isMatch:!0,score:0};return r&&(a.matchedIndices=[[0,e.length-1]]),a}var s=this.options,l=s.maxPatternLength,c=s.tokenSeparator;if(this.pattern.length>l)return i(e,this.pattern,c);var u=this.options,h=u.location,d=u.distance,f=u.threshold,p=u.findAllMatches,v=u.minMatchCharLength;return o(e,this.pattern,this.patternAlphabet,{location:h,distance:d,threshold:f,findAllMatches:p,minMatchCharLength:v,includeMatches:r})}}])&&r(t.prototype,n),e}();e.exports=s},function(e,t){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,i=new RegExp(t.replace(n,"\\$&").replace(r,"|")),o=e.match(i),a=!!o,s=[];if(a)for(var l=0,c=o.length;l<c;l+=1){var u=o[l];s.push([e.indexOf(u),u.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(e,t,n){var r=n(4),i=n(5);e.exports=function(e,t,n,o){for(var a=o.location,s=void 0===a?0:a,l=o.distance,c=void 0===l?100:l,u=o.threshold,h=void 0===u?.6:u,d=o.findAllMatches,f=void 0!==d&&d,p=o.minMatchCharLength,v=void 0===p?1:p,m=o.includeMatches,g=void 0!==m&&m,y=s,_=e.length,b=h,w=e.indexOf(t,y),k=t.length,x=[],C=0;C<_;C+=1)x[C]=0;if(-1!==w){var O=r(t,{errors:0,currentLocation:w,expectedLocation:y,distance:c});if(b=Math.min(O,b),-1!==(w=e.lastIndexOf(t,y+k))){var E=r(t,{errors:0,currentLocation:w,expectedLocation:y,distance:c});b=Math.min(E,b)}}w=-1;for(var S=[],L=1,M=k+_,T=1<<(k<=31?k-1:30),q=0;q<k;q+=1){for(var P=0,j=M;P<j;)r(t,{errors:q,currentLocation:y+j,expectedLocation:y,distance:c})<=b?P=j:M=j,j=Math.floor((M-P)/2+P);M=j;var A=Math.max(1,y-j+1),I=f?_:Math.min(y+j,_)+k,N=Array(I+2);N[I+1]=(1<<q)-1;for(var z=I;z>=A;z-=1){var R=z-1,D=n[e.charAt(R)];if(D&&(x[R]=1),N[z]=(N[z+1]<<1|1)&D,0!==q&&(N[z]|=(S[z+1]|S[z])<<1|1|S[z+1]),N[z]&T&&(L=r(t,{errors:q,currentLocation:R,expectedLocation:y,distance:c}))<=b){if(b=L,(w=R)<=y)break;A=Math.max(1,2*y-w)}}if(r(t,{errors:q+1,currentLocation:y,expectedLocation:y,distance:c})>b)break;S=N}var H={isMatch:w>=0,score:0===L?.001:L};return g&&(H.matchedIndices=i(x,v)),H}},function(e,t){e.exports=function(e,t){var n=t.errors,r=void 0===n?0:n,i=t.currentLocation,o=void 0===i?0:i,a=t.expectedLocation,s=void 0===a?0:a,l=t.distance,c=void 0===l?100:l,u=r/e.length,h=Math.abs(s-o);return c?u+h/c:h?1:u}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=-1,o=0,a=e.length;o<a;o+=1){var s=e[o];s&&-1===r?r=o:s||-1===r||((i=o-1)-r+1>=t&&n.push([r,i]),r=-1)}return e[o-1]&&o-r>=t&&n.push([r,o-1]),n}},function(e,t){e.exports=function(e){for(var t={},n=e.length,r=0;r<n;r+=1)t[e.charAt(r)]=0;for(var i=0;i<n;i+=1)t[e.charAt(i)]|=1<<n-i-1;return t}},function(e,t){var n=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},r=function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},i=function(e){return"string"==typeof e},o=function(e){return"number"==typeof e};e.exports={get:function(e,t){var a=[];return function e(t,s){if(s){var l=s.indexOf("."),c=s,u=null;-1!==l&&(c=s.slice(0,l),u=s.slice(l+1));var h=t[c];if(null!=h)if(u||!i(h)&&!o(h))if(n(h))for(var d=0,f=h.length;d<f;d+=1)e(h[d],u);else u&&e(h,u);else a.push(r(h))}else a.push(t)}(e,t),a},isArray:n,isString:i,isNum:o,toString:r}}])},6496:e=>{!function(){var t=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function i(e,i,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=o&&o.debug||!1;if(a){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var l=document.createElement("div");l.id="input-textarea-caret-position-mirror-div",document.body.appendChild(l);var c=l.style,u=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,h="INPUT"===e.nodeName;c.whiteSpace="pre-wrap",h||(c.wordWrap="break-word"),c.position="absolute",a||(c.visibility="hidden"),t.forEach((function(e){h&&"lineHeight"===e?c.lineHeight=u.height:c[e]=u[e]})),r?e.scrollHeight>parseInt(u.height)&&(c.overflowY="scroll"):c.overflow="hidden",l.textContent=e.value.substring(0,i),h&&(l.textContent=l.textContent.replace(/\s/g," "));var d=document.createElement("span");d.textContent=e.value.substring(i)||".",l.appendChild(d);var f={top:d.offsetTop+parseInt(u.borderTopWidth),left:d.offsetLeft+parseInt(u.borderLeftWidth),height:parseInt(u.lineHeight)};return a?d.style.backgroundColor="#aaa":document.body.removeChild(l),f}void 0!==e.exports?e.exports=i:n&&(window.getCaretCoordinates=i)}()},8435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(6729)),o=a(n(4580));function a(e){return e&&e.__esModule?e:{default:e}}a(n(2899)),a(n(4742));var s=["handleQueryResult"],l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.strategies=[],s.forEach((function(t){e[t]=e[t].bind(e)})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"destroy",value:function(){return this.strategies.forEach((function(e){return e.destroy()})),this}},{key:"registerStrategy",value:function(e){return this.strategies.push(e),this}},{key:"run",value:function(e){var t=this.extractQuery(e);t?t.execute(this.handleQueryResult):this.handleQueryResult([])}},{key:"extractQuery",value:function(e){for(var t=0;t<this.strategies.length;t++){var n=o.default.build(this.strategies[t],e);if(n)return n}return null}},{key:"handleQueryResult",value:function(e){this.emit("hit",{searchResults:e})}}]),t}(i.default);t.default=l},7771:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(6729)),o=s(n(3763)),a=(s(n(2899)),n(7309));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.shown=!1,n.items=[],n.activeItem=null,n.footer=e.footer,n.header=e.header,n.maxCount=e.maxCount||10,n.el.className=e.className||"dropdown-menu textcomplete-dropdown",n.rotate=!e.hasOwnProperty("rotate")||e.rotate,n.placement=e.placement,n.itemOptions=e.item||{};var r=e.style;return r&&Object.keys(r).forEach((function(e){n.el.style[e]=r[e]})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,null,[{key:"createElement",value:function(){var e=document.createElement("ul"),t=e.style;t.display="none",t.position="absolute",t.zIndex="10000";var n=document.body;return n&&n.appendChild(e),e}}]),r(t,[{key:"destroy",value:function(){var e=this.el.parentNode;return e&&e.removeChild(this.el),this.clear()._el=null,this}},{key:"render",value:function(e,t){var n=this,r=(0,a.createCustomEvent)("render",{cancelable:!0});if(this.emit("render",r),r.defaultPrevented)return this;var i=e.map((function(e){return e.data})),s=e.slice(0,this.maxCount||e.length).map((function(e){return new o.default(e,n.itemOptions)}));return this.clear().setStrategyId(e[0]).renderEdge(i,"header").append(s).renderEdge(i,"footer").show().setOffset(t),this.emit("rendered",(0,a.createCustomEvent)("rendered")),this}},{key:"deactivate",value:function(){return this.hide().clear()}},{key:"select",value:function(e){var t={searchResult:e.searchResult},n=(0,a.createCustomEvent)("select",{cancelable:!0,detail:t});return this.emit("select",n),n.defaultPrevented||(this.deactivate(),this.emit("selected",(0,a.createCustomEvent)("selected",{detail:t}))),this}},{key:"up",value:function(e){return this.shown?this.moveActiveItem("prev",e):this}},{key:"down",value:function(e){return this.shown?this.moveActiveItem("next",e):this}},{key:"getActiveItem",value:function(){return this.activeItem}},{key:"append",value:function(e){var t=this,n=document.createDocumentFragment();return e.forEach((function(e){t.items.push(e),e.appended(t),n.appendChild(e.el)})),this.el.appendChild(n),this}},{key:"setOffset",value:function(e){var t=document.documentElement;if(t){var n=this.el.offsetWidth;if(e.left){var r=t.clientWidth;e.left+n>r&&(e.left=r-n),this.el.style.left=e.left+"px"}else e.right&&(e.right-n<0&&(e.right=0),this.el.style.right=e.right+"px");this.isPlacementTop()?this.el.style.bottom=t.clientHeight-e.top+e.lineHeight+"px":this.el.style.top=e.top+"px"}return this}},{key:"show",value:function(){if(!this.shown){var e=(0,a.createCustomEvent)("show",{cancelable:!0});if(this.emit("show",e),e.defaultPrevented)return this;this.el.style.display="block",this.shown=!0,this.emit("shown",(0,a.createCustomEvent)("shown"))}return this}},{key:"hide",value:function(){if(this.shown){var e=(0,a.createCustomEvent)("hide",{cancelable:!0});if(this.emit("hide",e),e.defaultPrevented)return this;this.el.style.display="none",this.shown=!1,this.emit("hidden",(0,a.createCustomEvent)("hidden"))}return this}},{key:"clear",value:function(){return this.el.innerHTML="",this.items.forEach((function(e){return e.destroy()})),this.items=[],this}},{key:"moveActiveItem",value:function(e,t){var n="next"===e?this.activeItem?this.activeItem.next:this.items[0]:this.activeItem?this.activeItem.prev:this.items[this.items.length-1];return n&&(n.activate(),t.preventDefault()),this}},{key:"setStrategyId",value:function(e){var t=e&&e.strategy.props.id;return t?this.el.setAttribute("data-strategy",t):this.el.removeAttribute("data-strategy"),this}},{key:"renderEdge",value:function(e,t){var n=("header"===t?this.header:this.footer)||"",r="function"==typeof n?n(e):n,i=document.createElement("li");return i.classList.add("textcomplete-"+t),i.innerHTML=r,this.el.appendChild(i),this}},{key:"isPlacementTop",value:function(){return"top"===this.placement}},{key:"el",get:function(){return this._el||(this._el=t.createElement()),this._el}}]),t}(i.default);t.default=l},3763:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CLASS_NAME=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(r=n(2899))&&r.__esModule;var o=t.DEFAULT_CLASS_NAME="textcomplete-item",a=["onClick","onMouseover"],s=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.searchResult=t,this.active=!1,this.className=n.className||o,this.activeClassName=this.className+" active",a.forEach((function(e){r[e]=r[e].bind(r)}))}return i(e,[{key:"destroy",value:function(){this.el.removeEventListener("mousedown",this.onClick,!1),this.el.removeEventListener("mouseover",this.onMouseover,!1),this.el.removeEventListener("touchstart",this.onClick,!1),this.active&&(this.dropdown.activeItem=null),this._el=null}},{key:"appended",value:function(e){this.dropdown=e,this.siblings=e.items,this.index=this.siblings.length-1}},{key:"activate",value:function(){if(!this.active){var e=this.dropdown.getActiveItem();e&&e.deactivate(),this.dropdown.activeItem=this,this.active=!0,this.el.className=this.activeClassName}return this}},{key:"deactivate",value:function(){return this.active&&(this.active=!1,this.el.className=this.className,this.dropdown.activeItem=null),this}},{key:"onClick",value:function(e){e.preventDefault(),this.dropdown.select(this)}},{key:"onMouseover",value:function(){this.activate()}},{key:"el",get:function(){if(this._el)return this._el;var e=document.createElement("li");e.className=this.active?this.activeClassName:this.className;var t=document.createElement("a");return t.innerHTML=this.searchResult.render(),e.appendChild(t),this._el=e,e.addEventListener("mousedown",this.onClick),e.addEventListener("mouseover",this.onMouseover),e.addEventListener("touchstart",this.onClick),e}},{key:"next",get:function(){var e=void 0;if(this.index===this.siblings.length-1){if(!this.dropdown.rotate)return null;e=0}else e=this.index+1;return this.siblings[e]}},{key:"prev",get:function(){var e=void 0;if(0===this.index){if(!this.dropdown.rotate)return null;e=this.siblings.length-1}else e=this.index-1;return this.siblings[e]}}]),e}();t.default=s},3746:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(6729)),o=n(7309);function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}a(n(2899));var c=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"destroy",value:function(){return this}},{key:"applySearchResult",value:function(e){throw new Error("Not implemented.")}},{key:"getCursorOffset",value:function(){throw new Error("Not implemented.")}},{key:"getBeforeCursor",value:function(){throw new Error("Not implemented.")}},{key:"emitMoveEvent",value:function(e){var t=(0,o.createCustomEvent)("move",{cancelable:!0,detail:{code:e}});return this.emit("move",t),t}},{key:"emitEnterEvent",value:function(){var e=(0,o.createCustomEvent)("enter",{cancelable:!0});return this.emit("enter",e),e}},{key:"emitChangeEvent",value:function(){var e=(0,o.createCustomEvent)("change",{detail:{beforeCursor:this.getBeforeCursor()}});return this.emit("change",e),e}},{key:"emitEscEvent",value:function(){var e=(0,o.createCustomEvent)("esc",{cancelable:!0});return this.emit("esc",e),e}},{key:"getCode",value:function(e){return 9===e.keyCode||13===e.keyCode?"ENTER":27===e.keyCode?"ESC":38===e.keyCode?"UP":40===e.keyCode||78===e.keyCode&&e.ctrlKey?"DOWN":80===e.keyCode&&e.ctrlKey?"UP":"OTHER"}}]),t}(i.default);t.default=c},6290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Textcomplete=t.Textarea=void 0;var r=o(n(8519)),i=o(n(1109));function o(e){return e&&e.__esModule?e:{default:e}}t.Textarea=r.default,t.Textcomplete=i.default},4580:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=o(n(2899));function o(e){return e&&e.__esModule?e:{default:e}}o(n(4742));var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.strategy=t,this.term=n,this.match=r}return r(e,null,[{key:"build",value:function(t,n){if("function"==typeof t.props.context){var r=t.props.context(n);if("string"==typeof r)n=r;else if(!r)return null}var i=t.matchText(n);return i?new e(t,i[t.index],i):null}}]),r(e,[{key:"execute",value:function(e){var t=this;this.strategy.search(this.term,(function(n){e(n.map((function(e){return new i.default(e,t.term,t.strategy)})))}),this.match)}}]),e}();t.default=a},2899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();(r=n(4742))&&r.__esModule;var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.term=n,this.strategy=r}return i(e,[{key:"replace",value:function(e,t){var n=this.strategy.replace(this.data);if(null!==n){Array.isArray(n)&&(t=n[1]+t,n=n[0]);var r=this.strategy.matchText(e);if(r)return n=n.replace(/\$&/g,r[0]).replace(/\$(\d)/g,(function(e,t){return r[parseInt(t,10)]})),[[e.slice(0,r.index),n,e.slice(r.index+r[0].length)].join(""),t]}}},{key:"render",value:function(){return this.strategy.template(this.data,this.term)}}]),e}();t.default=o},4742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function r(e){return e}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t,this.cache=t.cache?{}:null}return n(e,[{key:"destroy",value:function(){return this.cache=null,this}},{key:"search",value:function(e,t,n){this.cache?this.searchWithCache(e,t,n):this.props.search(e,t,n)}},{key:"replace",value:function(e){return this.props.replace(e)}},{key:"searchWithCache",value:function(e,t,n){var r=this;this.cache&&this.cache[e]?t(this.cache[e]):this.props.search(e,(function(n){r.cache&&(r.cache[e]=n),t(n)}),n)}},{key:"matchText",value:function(e){return"function"==typeof this.match?this.match(e):e.match(this.match)}},{key:"match",get:function(){return this.props.match}},{key:"index",get:function(){return"number"==typeof this.props.index?this.props.index:2}},{key:"template",get:function(){return this.props.template||r}}]),e}();t.default=i},8519:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},o=l(n(5667)),a=l(n(3746)),s=n(7309);function l(e){return e&&e.__esModule?e:{default:e}}l(n(2899));var c=n(6496),u=["onInput","onKeydown"],h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.el=e,u.forEach((function(e){n[e]=n[e].bind(n)})),n.startListening(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"destroy",value:function(){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.stopListening(),this.el=null,this}},{key:"applySearchResult",value:function(e){var t=this.getBeforeCursor();if(null!=t){var n=e.replace(t,this.getAfterCursor());this.el.focus(),Array.isArray(n)&&((0,o.default)(this.el,n[0],n[1]),this.el.dispatchEvent(new Event("input")))}}},{key:"getCursorOffset",value:function(){var e=(0,s.calculateElementOffset)(this.el),t=this.getElScroll(),n=this.getCursorPosition(),r=(0,s.getLineHeightPx)(this.el),i=e.top-t.top+n.top+r,o=e.left-t.left+n.left;return"rtl"!==this.el.dir?{top:i,left:o,lineHeight:r}:{top:i,right:document.documentElement?document.documentElement.clientWidth-o:0,lineHeight:r}}},{key:"getBeforeCursor",value:function(){return this.el.selectionStart!==this.el.selectionEnd?null:this.el.value.substring(0,this.el.selectionEnd)}},{key:"getAfterCursor",value:function(){return this.el.value.substring(this.el.selectionEnd)}},{key:"getElScroll",value:function(){return{top:this.el.scrollTop,left:this.el.scrollLeft}}},{key:"getCursorPosition",value:function(){return c(this.el,this.el.selectionEnd)}},{key:"onInput",value:function(){this.emitChangeEvent()}},{key:"onKeydown",value:function(e){var t=this.getCode(e),n=void 0;"UP"===t||"DOWN"===t?n=this.emitMoveEvent(t):"ENTER"===t?n=this.emitEnterEvent():"ESC"===t&&(n=this.emitEscEvent()),n&&n.defaultPrevented&&e.preventDefault()}},{key:"startListening",value:function(){this.el.addEventListener("input",this.onInput),this.el.addEventListener("keydown",this.onKeydown)}},{key:"stopListening",value:function(){this.el.removeEventListener("input",this.onInput),this.el.removeEventListener("keydown",this.onKeydown)}}]),t}(a.default);t.default=h},1109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(8435)),o=(l(n(3746)),l(n(7771))),a=l(n(4742)),s=(l(n(2899)),l(n(6729)));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=["handleChange","handleEnter","handleEsc","handleHit","handleMove","handleSelect"],d=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.completer=new i.default,r.isQueryInFlight=!1,r.nextPendingQuery=null,r.dropdown=new o.default(n.dropdown||{}),r.editor=e,r.options=n,h.forEach((function(e){r[e]=r[e].bind(r)})),r.startListening(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.completer.destroy(),this.dropdown.destroy(),e&&this.editor.destroy(),this.stopListening(),this}},{key:"hide",value:function(){return this.dropdown.deactivate(),this}},{key:"register",value:function(e){var t=this;return e.forEach((function(e){t.completer.registerStrategy(new a.default(e))})),this}},{key:"trigger",value:function(e){return this.isQueryInFlight?this.nextPendingQuery=e:(this.isQueryInFlight=!0,this.nextPendingQuery=null,this.completer.run(e)),this}},{key:"handleHit",value:function(e){var t=e.searchResults;t.length?this.dropdown.render(t,this.editor.getCursorOffset()):this.dropdown.deactivate(),this.isQueryInFlight=!1,null!==this.nextPendingQuery&&this.trigger(this.nextPendingQuery)}},{key:"handleMove",value:function(e){"UP"===e.detail.code?this.dropdown.up(e):this.dropdown.down(e)}},{key:"handleEnter",value:function(e){var t=this.dropdown.getActiveItem();t?(this.dropdown.select(t),e.preventDefault()):this.dropdown.deactivate()}},{key:"handleEsc",value:function(e){this.dropdown.shown&&(this.dropdown.deactivate(),e.preventDefault())}},{key:"handleChange",value:function(e){null!=e.detail.beforeCursor?this.trigger(e.detail.beforeCursor):this.dropdown.deactivate()}},{key:"handleSelect",value:function(e){this.emit("select",e),e.defaultPrevented||this.editor.applySearchResult(e.detail.searchResult)}},{key:"startListening",value:function(){var e=this;this.editor.on("move",this.handleMove).on("enter",this.handleEnter).on("esc",this.handleEsc).on("change",this.handleChange),this.dropdown.on("select",this.handleSelect),["show","shown","render","rendered","selected","hidden","hide"].forEach((function(t){e.dropdown.on(t,(function(){return e.emit(t)}))})),this.completer.on("hit",this.handleHit)}},{key:"stopListening",value:function(){this.completer.removeAllListeners(),this.dropdown.removeAllListeners(),this.editor.removeListener("move",this.handleMove).removeListener("enter",this.handleEnter).removeListener("esc",this.handleEsc).removeListener("change",this.handleChange)}}]),t}(s.default);t.default=d},7309:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateElementOffset=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.defaultView,i=n.documentElement,o={top:t.top+r.pageYOffset,left:t.left+r.pageXOffset};return i&&(o.top-=i.clientTop,o.left-=i.clientLeft),o},t.getLineHeightPx=function(e){var t=window.getComputedStyle(e);return i(t.lineHeight.charCodeAt(0))?i(t.lineHeight.charCodeAt(t.lineHeight.length-1))?parseFloat(t.lineHeight)*parseFloat(t.fontSize):parseFloat(t.lineHeight):o(e.nodeName,t)},t.calculateLineHeightPx=o,t.createCustomEvent="function"==typeof window.CustomEvent?function(e,t){return new document.defaultView.CustomEvent(e,{cancelable:t&&t.cancelable||!1,detail:t&&t.detail||void 0})}:function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,t&&t.cancelable||!1,t&&t.detail||void 0),n};var n="0".charCodeAt(0),r="9".charCodeAt(0);function i(e){return e>=n&&e<=r}function o(e,t){var n=document.body;if(!n)return 0;var r=document.createElement(e);r.innerHTML="&nbsp;",r.style.fontSize=t.fontSize,r.style.fontFamily=t.fontFamily,r.style.padding="0",n.appendChild(r),r instanceof HTMLTextAreaElement&&(r.rows=1);var i=r.offsetHeight;return n.removeChild(r),i}},5667:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){for(var r=e.value,i=t+(n||""),o=document.activeElement,a=0,s=0;a<r.length&&a<i.length&&r[a]===i[a];)a++;for(;r.length-s-1>=0&&i.length-s-1>=0&&r[r.length-s-1]===i[i.length-s-1];)s++;a=Math.min(a,Math.min(r.length,i.length)-s),e.setSelectionRange(a,r.length-s);var l=i.substring(a,i.length-s);if(e.focus(),!document.execCommand("insertText",!1,l)){e.value=i;var c=document.createEvent("Event");c.initEvent("input",!0,!0),e.dispatchEvent(c)}return e.setSelectionRange(t.length,t.length),o&&o.focus(),e}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,i,o]=e[u],s=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,o<a&&(a=o));if(s){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.j=441,(()=>{var e={441:0,504:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,s,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(l)var u=l(r)}for(t&&t(n);c<a.length;c++)o=a[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},n=self.webpackChunkhanfor=self.webpackChunkhanfor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=r.O(void 0,[351],(()=>r(9925)));i=r.O(i)})();