(()=>{var e,t={6413:(e,t,r)=>{var n=r(4692);r(9875),r(9875),n(document).ready((function(){const e=n("#clustering-progress-bar"),t=n("#start-clustering-button");function r(){n.get("/api/ai_display?type=progress_clustering").done((function(r){!function(t,r){const n=Math.round(t/r*100);e.css("width",n+"%"),e.attr("aria-valuenow",n),e.text(`${t}/${r} (${t} of ${r} completed)`)}(r.processed,r.total),document.getElementById("statusDisplay").innerText=`Status: ${r.status.charAt(0).toUpperCase()+r.status.slice(1)}`,"completed"===r.status?"true"!==localStorage.getItem("clusteringCompleted")?(localStorage.setItem("clusteringCompleted","true"),a(),t.prop("disabled",!1),setTimeout((()=>{alert("Clustering completed!")}),500)):t.prop("disabled",!1):["clustering","pending","extracting"].includes(r.status)&&(o(),t.prop("disabled",!0))})).fail((function(e,t,r){console.error("Error fetching progress:",t,r)}))}function o(){localStorage.removeItem("clusteringCompleted")}function a(){n.get("/api/ai_display?type=clusters").done((function(e){e.clusters?(function(e){const t=n("#cluster-table tbody");t.empty(),e.clusters.sort(((e,t)=>{const r=e.ids.sort()[0],n=t.ids.sort()[0];return r.localeCompare(n)})),e.clusters.forEach((e=>{e.ids.sort(((e,t)=>e.localeCompare(t))),e.name=`Cluster ${e.ids[0]}`;const r=n("<tr></tr>"),o=`<td>${e.name}</td>`,a=e.ids.map((e=>`<span class="badge bg-info">\n                    <a href="${base_url}?command=search&col=2&q=%5C%22${e}%5C%22" target="_blank" class="link-light">${e}</a>\n                </span>`)).join(" "),s=e.ids.map((e=>`%5C%22${e}%5C%22`)).join("%3AOR%3A"),l=e.ids.length>1?`<span class="badge bg-info">\n                    <a href="${base_url}?command=search&col=2&q=${s}" target="_blank" class="link-light">Show all</a>\n                </span>`:"";r.append(o),r.append(`<td>${a} ${l}</td>`),t.append(r)}))}(e),r()):console.error("Unexpected response format:",e)})).fail((function(e){console.error("Error loading table data:",e.responseText)}))}t.click((function(){n.ajax({type:"POST",url:"/api/ai_display",contentType:"application/json",data:JSON.stringify({action:"start_clustering"})}).done((function(e){o(),console.log("Clustering started:",e),t.prop("disabled",!0),r()})).fail((function(e,t,r){console.error("Error:",t,r),alert("Clustering could not be started.")}))})),a(),setInterval(r,100),setInterval((function(){n.get("/api/ai_display?type=progress_ai").done((function(e){const t=n("#ai-progress-table tbody");t.empty(),e.forEach((e=>{const r=e.id||"N/A",n=e.prompt?e.prompt:"N/A",o=e.status||"N/A",a=e.ai_response?JSON.stringify(e.ai_response,null,2):"N/A",s=Math.floor(Date.now()/1e3),l=e.time?Math.max(0,Math.ceil(9-(s-e.time))):"N/A",i=`\n                <tr>\n                    <td>${r}</td>\n                    <td>${n}</td>\n                    <td>${o}</td>\n                    <td>${a}</td>\n                    <td>${"N/A"!==l?`${l} sec`:l}</td>\n                </tr>\n            `;t.append(i)}))})).fail((function(e,t,r){console.error("Fehler beim Abrufen der AI-Fortschrittsdaten:",t,r)}))}),100)}))}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var a=r[e]={id:e,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,r,o,a)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,o,a]=e[d],l=!0,i=0;i<r.length;i++)(!1&a||s>=a)&&Object.keys(n.O).every((e=>n.O[e](r[i])))?r.splice(i--,1):(l=!1,a<s&&(s=a));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,o,a]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=522,(()=>{var e={522:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,a,[s,l,i]=r,c=0;if(s.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(i)var d=i(n)}for(t&&t(r);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},r=self.webpackChunkhanfor=self.webpackChunkhanfor||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),n.nc=void 0;var o=n.O(void 0,[223],(()=>n(6413)));o=n.O(o)})();