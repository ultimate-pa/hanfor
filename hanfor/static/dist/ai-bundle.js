(()=>{var t,e={1245:(t,e,n)=>{var r=n(4692);r(document).ready((function(){function t(t){r("#output-content").text(t)}r("#terminate-ai-button").click((function(){r.ajax({type:"POST",url:"/api/ai/terminate_ai",contentType:"application/json"}).done((function(e){alert(e.message),t(JSON.stringify(e,null,2))})).fail((function(e){alert(`Error: ${e.responseText}`),t(e.responseText)}))})),r("#terminate-clustering-button").click((function(){r.ajax({type:"POST",url:"/api/ai/terminate_clustering",contentType:"application/json"}).done((function(e){alert(e.message),t(JSON.stringify(e,null,2))})).fail((function(e){alert(`Error: ${e.responseText}`),t(e.responseText)}))})),r("#get-cluster-button").click((function(){r.ajax({type:"GET",url:"/api/ai/cluster",contentType:"application/json"}).done((function(t){console.log(t),function(t){if(console.log("Received data:",t),!Array.isArray(t))return void console.error("The API response is not in the expected format.");const e=r("#cluster-table tbody");e.empty(),t.sort(((t,e)=>{const n=t.map((t=>t?t.toString():"")).sort()[0],r=e.map((t=>t?t.toString():"")).sort()[0];return n.localeCompare(r)})),t.forEach((t=>{if(!Array.isArray(t))return void console.error("A cluster has an invalid structure:",t);t.sort(((t,e)=>t.localeCompare(e)));const n=`Cluster ${t[0]}`,o=r("<tr></tr>"),a=`<td>${n}</td>`,s=t.map((t=>`<span class="badge bg-info">\n                    <a href="${base_url}?command=search&col=2&q=%5C%22${t}%5C%22" target="_blank" class="link-light">${t}</a>\n                </span>`)).join(" "),i=t.map((t=>`%5C%22${t}%5C%22`)).join("%3AOR%3A"),l=t.length>1?`<span class="badge bg-info">\n                    <a href="${base_url}?command=search&col=2&q=${i}" target="_blank" class="link-light">Show all</a>\n                </span>`:"";o.append(a),o.append(`<td>${s} ${l}</td>`),e.append(o)}))}(t)})).fail((function(e){alert(`Error: ${e.responseText}`),t(e.responseText)}))})),r("#get-ai-progress-button").click((function(){r.ajax({type:"GET",url:"/api/ai/ai_progress",contentType:"application/json"}).done((function(e){t(JSON.stringify(e,null,2))})).fail((function(e){alert(`Error: ${e.responseText}`),t(e.responseText)}))})),r("#start-clustering").click((function(){r.ajax({type:"POST",url:"/api/ai/start_clustering",contentType:"application/json"}).done((function(e){t(JSON.stringify(e,null,2))})).fail((function(e){t(e.responseText)}))})),setInterval((function(){r.ajax({type:"GET",url:"/api/ai/cluster_progress",contentType:"application/json"}).done((function(t){const e=t.processed,n=t.total,o=t.status;r("#progress-status").text(`Status: ${o}`),r("#progress-bar").css("width",e/n*100+"%"),r("#progress-bar").attr("aria-valuenow",e),r("#progress-bar").text(`${e}/${n}`),console.log(`Progress: ${e}/${n} (Status: ${o})`)})).fail((function(t){alert(`Error: ${t.responseText}`),r("#progress-bar").css("width","0%"),r("#progress-bar").text("0/0"),r("#progress-status").text("Status: Error")}))}),50),setInterval((function(){r.get("/api/ai/ai_progress").done((function(t){const e=r("#ai-progress-table tbody");e.empty(),t.forEach((t=>{const n=t.id||"N/A",r=t.prompt?t.prompt:"N/A",o=t.status||"N/A",a=t.ai_response?JSON.stringify(t.ai_response,null,2):"N/A",s=Math.floor(Date.now()/1e3),i=t.time?Math.max(0,Math.ceil(9-(s-t.time))):"N/A",l=`\n                    <tr id="row-${n}">\n                        <td>${n}</td>\n                        <td>${r}</td>\n                        <td>${o}</td>\n                        <td>${a}</td>\n                        <td id="countdown-${n}">${"N/A"!==i?`${i} sec`:i}</td>\n                    </tr>\n                `;e.append(l)}))}))}),50)}))}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={id:t,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.exports}r.m=e,t=[],r.O=(e,n,o,a)=>{if(!n){var s=1/0;for(p=0;p<t.length;p++){for(var[n,o,a]=t[p],i=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(r.O).every((t=>r.O[t](n[l])))?n.splice(l--,1):(i=!1,a<s&&(s=a));if(i){t.splice(p--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var p=t.length;p>0&&t[p-1][2]>a;p--)t[p]=t[p-1];t[p]=[n,o,a]},r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.j=53,(()=>{var t={53:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,a,[s,i,l]=n,c=0;if(s.some((e=>0!==t[e]))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(l)var p=l(r)}for(e&&e(n);c<s.length;c++)a=s[c],r.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return r.O(p)},n=self.webpackChunkhanfor=self.webpackChunkhanfor||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),r.nc=void 0;var o=r.O(void 0,[223],(()=>r(1245)));o=r.O(o)})();