{% extends "layout.html" %}

{% block title %}
    AI Dashboard
{% endblock %}

{% block content %}
    <h1>Live Updates</h1>
    <div id="updates"></div>
    <div class="container mt-4">
        <h4>Clustering Progress</h4>
        <div class="mt-3">
            <button id="terminate-ai-button" class="btn btn-danger">Terminate AI</button>
            <button id="terminate-clustering-button" class="btn btn-warning">Terminate Clustering</button>
            <button id="get-cluster-button" class="btn btn-info">Get Cluster Data</button>
            <button id="get-ai-progress-button" class="btn btn-primary">Get AI Progress</button>
            <button id="get-cluster-progress-button" class="btn btn-success">Get Cluster Progress</button>
            <button id="start-clustering" class="btn btn-success">Start Clustering</button>
        </div>
        <div class="mt-4" id="output">
            <h5>Output</h5>
            <pre id="output-content" style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto;">Click a button to see results here...</pre>
        </div>
    </div>

    <div id="progress-container" class="mt-3">
        <h5 id="progress-status">Status: not started</h5>
        <div class="progress">
            <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
    </div>


    <!-- AI Progress Section -->
    <h4>AI Formalization Progress</h4>
    <table id="ai-progress-table" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>id</th>
                <th>promptDesc</th>
                <th>status</th>
                <th>aiResponse</th>
                <th>deletionCountdown</th>
            </tr>
        </thead>
        <tbody>
            <!-- Data will be dynamically added via JavaScript -->
        </tbody>
    </table>


    <h4>Cluster Data</h4>
        <table id="cluster-table" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Cluster</th>
                    <th>IDs</th>
                </tr>
            </thead>
            <tbody>
                <!-- Dynamic data will be inserted here -->
            </tbody>
        </table>
{% endblock %}


{% block scripts %}
    {{ super() }}
    <script type="text/javascript">
        // Set the base URL for JavaScript functionality
        var base_url = '{{ url_for("site", site="/") }}';
    </script>
    <script type="text/javascript" src="{{ url_for("static", filename=BUNDLE_JS) }}"></script>
{% endblock %}