(()=>{var e,t={6413:(e,t,r)=>{var o=r(4692);r(9875),r(9875),o(document).ready((function(){const e=o("#clustering-progress-bar"),t=o("#start-clustering-button");function r(){o.get("/api/ai_display?type=progress_clustering").done((function(r){!function(t,r){const o=Math.round(t/r*100);e.css("width",o+"%"),e.attr("aria-valuenow",o),e.text(`${t}/${r} (${t} of ${r} completed)`)}(r.processed,r.total),document.getElementById("statusDisplay").innerText=`Status: ${r.status.charAt(0).toUpperCase()+r.status.slice(1)}`,"completed"===r.status?"true"!==localStorage.getItem("clusteringCompleted")?(localStorage.setItem("clusteringCompleted","true"),a(),t.prop("disabled",!1),setTimeout((()=>{alert("Clustering completed!")}),500)):t.prop("disabled",!1):["clustering","pending","extracting"].includes(r.status)&&n()})).fail((function(e,t,r){console.error("Error fetching progress:",t,r)}))}function n(){localStorage.removeItem("clusteringCompleted")}function a(){o.get("/api/ai_display?type=clusters").done((function(e){e.clusters?(function(e){const t=o("#cluster-table tbody");t.empty(),e.clusters.sort(((e,t)=>{const r=e.ids.sort()[0],o=t.ids.sort()[0];return r.localeCompare(o)})),e.clusters.forEach((e=>{e.ids.sort(((e,t)=>e.localeCompare(t))),e.name=`Cluster ${e.ids[0]}`;const r=o("<tr></tr>"),n=`<td>${e.name}</td>`,a=e.ids.map((e=>`<span class="badge bg-info">\n                    <a href="${base_url}?command=search&col=2&q=%5C%22${e}%5C%22" target="_blank" class="link-light">${e}</a>\n                </span>`)).join(" "),s=e.ids.map((e=>`%5C%22${e}%5C%22`)).join("%3AOR%3A"),l=e.ids.length>1?`<span class="badge bg-info">\n                    <a href="${base_url}?command=search&col=2&q=${s}" target="_blank" class="link-light">Show all</a>\n                </span>`:"";r.append(n),r.append(`<td>${a} ${l}</td>`),t.append(r)}))}(e),r()):console.error("Unexpected response format:",e)})).fail((function(e){console.error("Error loading table data:",e.responseText)}))}t.click((function(){o.ajax({type:"POST",url:"/api/ai_display",contentType:"application/json",data:JSON.stringify({action:"start_clustering"})}).done((function(e){n(),console.log("Clustering started:",e),r()})).fail((function(e,t,r){console.error("Error:",t,r),alert("Clustering could not be started.")}))})),a()}))}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={id:e,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,r,n,a)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,n,a]=e[d],l=!0,i=0;i<r.length;i++)(!1&a||s>=a)&&Object.keys(o.O).every((e=>o.O[e](r[i])))?r.splice(i--,1):(l=!1,a<s&&(s=a));if(l){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,n,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.j=522,(()=>{var e={522:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[s,l,i]=r,c=0;if(s.some((t=>0!==e[t]))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(i)var d=i(o)}for(t&&t(r);c<s.length;c++)a=s[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},r=self.webpackChunkhanfor=self.webpackChunkhanfor||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.nc=void 0;var n=o.O(void 0,[223],(()=>o(6413)));n=o.O(n)})();