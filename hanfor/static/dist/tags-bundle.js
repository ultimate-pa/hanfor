(()=>{var a,e={1541:(a,e,t)=>{var n=t(4692);t(7081);const{Modal:o}=t(9875);t(5194),t(1453),t(97),t(4371),t(7776),t(5219),t(9145),t(8131);const r=t(9692),{SearchNode:l}=t(1108),{sendTelemetry:i}=t(6719),c=[":AND:",":OR:",":NOT:",":COL_INDEX_00:",":COL_INDEX_01:",":COL_INDEX_02:"],d=sessionStorage.getItem("tagsSearchString");let s;function u(a){sessionStorage.setItem("tagsSearchString",a),s=l.fromQuery(a)}n(document).ajaxStart((function(){n.LoadingOverlay("show")})),n(document).ajaxStop((function(){n.LoadingOverlay("hide")})),n((function(){!function(){let a=n("#tag-modal");a[0].addEventListener("shown.bs.modal",(function(){r.update(n("#tag-description"))})),a[0].addEventListener("hide.bs.modal",(function(a){!function(a){const e=n("#tag-modal").data("unsavedChanges"),t=n("#modal-uuid").val();!0===e?!0!==confirm("You have unsaved changes, do you really want to close?")?a.preventDefault():i("tag",t,"close_without_save"):i("tag",t,"close")}(a)})),n("#tag-name").on("change",(function(){n("#tag-modal").data("unsavedChanges",!0)})),n("#tag-color").on("change",(function(){n("#tag-modal").data("unsavedChanges",!0)})),n("#tag-internal").on("change",(function(){n("#tag-modal").data("unsavedChanges",!0)}));let e=n("#tag-description");e.on("change",(function(){n("#tag-modal").data("unsavedChanges",!0)})),r(e),n("#save-tag-modal").on("click",(function(){!function(){let a=n("#modal-uuid").val(),e=n("#tag-name").val(),t=n("#tag-color").val(),r=n("#tag-description").val(),l=n("#tag-internal").prop("checked");i("tag",a,"save"),n.ajax({type:"PUT",url:`api/v1/tags/${a}`,contentType:"application/json",data:JSON.stringify({name:e,color:t,description:r,internal:l})}).done((function(){let a=n("#tag-modal");a.data("unsavedChanges",!1),n("#tags-table").DataTable().ajax.reload(null,!1),o.getOrCreateInstance(a).hide()})).fail((function(a,e,t){alert(t+"\n\n"+a.responseText)}))}()})),n(".delete-tag").bootstrapConfirmButton({onConfirm:function(){!function(){const a=n("#modal-uuid").val();i("tag",a,"delete"),n.ajax({type:"DELETE",url:`api/v1/tags/${a}`}).done((function(){let a=n("#tag-modal");a.data("unsavedChanges",!1),n("#tags-table").DataTable().ajax.reload(null,!1),o.getOrCreateInstance(a).hide()})).fail((function(a,e,t){alert(t+"\n\n"+a.responseText)}))}()}})}(),function(){const a=n("#tags-table"),e=n("#search_bar"),t=a.DataTable({paging:!0,stateSave:!0,pageLength:50,responsive:!0,lengthMenu:[[10,50,100,500,-1],[10,50,100,500,"All"]],dom:'rt<"container"<"row"<"col-md-6"li><"col-md-6"p>>>',ajax:{url:"api/v1/tags",dataSrc:""},deferRender:!0,colReorder:!0,columns:g,initComplete:function(){e.val(d),u((e.val()||"").trim()),n.fn.dataTable.ext.search.push((function(a,e){return function(a){return s.evaluate(a,[!0,!0,!0])}(e)})),this.api().draw()}});a.find("tbody").on("click","a.modal-opener",(function(a){a.preventDefault();let e=t.row(n(a.target).parent().parent()).data(),r=t.row(n(a.target).parent()).index();const l=n("#tag-modal");o.getOrCreateInstance(l[0]).show(),n("#modal-uuid").val(e.uuid),n("#modal-associated-row-index").val(r),n("#tag-modal-title").html("Tag: "+e.name);let c=n("#tag-name");c.val(e.name),c.prop("disabled",!e.mutable),n("#tag-color").val(e.color),n("#tag-description").val(e.description),n("#tag-internal").prop("checked",e.internal);const d=n(".delete-tag");d.prop("disabled",!e.mutable),d.data("html")&&d.html(d.data("html")).removeData("html"),l.data("unsavedChanges",!1),i("tag",e.uuid,"open")})),t.on("click",".internal-checkbox",(function(a){a.preventDefault();let e=a.currentTarget,o=t.row(e.parentNode).data();n.ajax({type:"PATCH",contentType:"application/json",url:`api/v1/tags/${o.uuid}`,data:JSON.stringify({internal:e.checked})}).done((function(){t.ajax.reload(null,!1)})).fail((function(a,e,t){alert(t+"\n\n"+a.responseText)}))}))}(),function(){const a=n("#tags-table").DataTable(),e=n("#search_bar");e.on("keydown",(function(t){13===t.which&&(u((e.val()||"").trim()),a.draw())})),new Awesomplete(e[0],{filter:function(a,e){let t=!1;return(e.split(":").length-1)%2==1&&(t=Awesomplete.FILTER_CONTAINS(a,e.match(/[^:]*$/)[0])),t},item:function(a,e){return Awesomplete.ITEM(a,e.match(/(:)(\S*$)/)[2])},replace:function(a){const e=this.input.value.match(/(.*)(:(?!.*:).*$)/)[1];this.input.value=e+a},list:c,minChars:1,autoFirst:!0}),n(".clear-all-filters").on("click",(function(){e.val("").effect("highlight",{color:"green"},500),u((e.val()||"").trim()),a.draw()}))}(),n("#add-standard-tags").on("click",(function(){n.ajax({type:"POST",url:"api/v1/tags/add_standard"}).done((function(){location.reload()})).fail((function(a,e,t){alert(t+"\n\n"+a.responseText)}))}))}));const g=[{data:"name",render:function(a,e,t){return`<a class="modal-opener" href="#"><span class="badge" style="background-color: ${t.color}" >${a}</span></a>`}},{data:"description",render:function(a){return`<div class="white-space-pre">${a}</div>`}},{data:"used_by",render:function(a,e,t){let o="";if(n(a).each((function(a,e){e.length>0&&(o+=`<span class="badge bg-info"><a href="${base_url}?command=search&col=2&q=%5C%22${e}%5C%22" target="_blank" class="link-light">${e}</a></span> `)})),a.length>1&&o.length>0){const a=`?command=search&col=5&q=%5C%22${t.name}%5C%22`;o+=`<span class="badge bg-info"><a href="${base_url}${a}" target="_blank" class="link-light">Show all</a></span> `}return o}},{data:"internal",render:function(a){return`<input class="form-check-input internal-checkbox" type="checkbox" ${a?"checked":""}>`}},{data:"used_by",visible:!1,searchable:!1,render:function(a){return a.filter((a=>a&&""!==a)).join(", ")}}]}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={id:a,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,a=[],n.O=(e,t,o,r)=>{if(!t){var l=1/0;for(s=0;s<a.length;s++){for(var[t,o,r]=a[s],i=!0,c=0;c<t.length;c++)(!1&r||l>=r)&&Object.keys(n.O).every((a=>n.O[a](t[c])))?t.splice(c--,1):(i=!1,r<l&&(l=r));if(i){a.splice(s--,1);var d=o();void 0!==d&&(e=d)}}return e}r=r||0;for(var s=a.length;s>0&&a[s-1][2]>r;s--)a[s]=a[s-1];a[s]=[t,o,r]},n.n=a=>{var e=a&&a.__esModule?()=>a.default:()=>a;return n.d(e,{a:e}),e},n.d=(a,e)=>{for(var t in e)n.o(e,t)&&!n.o(a,t)&&Object.defineProperty(a,t,{enumerable:!0,get:e[t]})},n.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e),n.r=a=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},n.j=192,(()=>{var a={192:0};n.O.j=e=>0===a[e];var e=(e,t)=>{var o,r,[l,i,c]=t,d=0;if(l.some((e=>0!==a[e]))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(c)var s=c(n)}for(e&&e(t);d<l.length;d++)r=l[d],n.o(a,r)&&a[r]&&a[r][0](),a[r]=0;return n.O(s)},t=self.webpackChunkhanfor=self.webpackChunkhanfor||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),n.nc=void 0;var o=n.O(void 0,[223],(()=>n(1541)));o=n.O(o)})();